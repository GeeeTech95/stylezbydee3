{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Start Password Reset Confirm Area -->
<section class="signup-area ptb-100">
    <div class="container">
        <div class="signup-content">
            <h2 class="text-center">Reset Your Password</h2>

            <form class="signup-form login-form" method="post">
                {% csrf_token %}

                <!-- New Password Field -->
                <div class="form-group">
                    <label for="new_password1">New Password</label>
                    <div class="password-wrapper">
                        <input type="password" class="form-control" placeholder="Enter new password" id="new_password1" name="new_password1" required>
                        <button type="button" class="toggle-password" data-target="new_password1">
                            <i class="eye-icon">üëÅ</i>
                        </button>
                    </div>
                    <span class="field-error" input-name="new_password1"></span>
                </div>

                <!-- Confirm Password Field -->
                <div class="form-group">
                    <label for="new_password2">Confirm Password</label>
                    <div class="password-wrapper">
                        <input type="password" class="form-control" placeholder="Confirm new password" id="new_password2" name="new_password2" required>
                        <button type="button" class="toggle-password" data-target="new_password2">
                            <i class="eye-icon">üëÅ</i>
                        </button>
                    </div>
                    <span class="field-error" input-name="new_password2"></span>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="default-btn full-width">Reset Password</button>

                <!-- Back to Login -->
                <p class="text-center mt-3">
                    <a href="{% url 'login-api' %}" class="return-store"><b>Back to Login</b></a>
                </p>
            </form>
        </div>
    </div>
</section>
<!-- End Password Reset Confirm Area -->

<style>
    .form-group {
        margin-bottom: 15px;
    }
    .form-group label {
        font-weight: 600;
        display: block;
        margin-bottom: 5px;
    }
    .form-control {
        width: 100%;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 16px;
    }
    .password-wrapper {
        position: relative;
    }
    .toggle-password {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        font-size: 18px;
        padding: 5px;
    }
    .eye-icon {
        font-size: 18px;
    }
  
    .full-width {
        width: 100%;
    }
</style>
{% endblock %}

{% block js %}
<script>
    document.querySelectorAll(".toggle-password").forEach(button => {
        button.addEventListener("click", function() {
            var target = document.getElementById(this.dataset.target);
            var icon = this.querySelector(".eye-icon");
            if (target.type === "password") {
                target.type = "text";
                icon.textContent = "üö´"; // Eye off
            } else {
                target.type = "password";
                icon.textContent = "üëÅ"; // Eye on
            }
        });
    });
</script>
{% endblock %}
