{% extends 'admin-base.html' %}
{% load static %}
{% load core %}
{% load humanize %}
{% block content %}


<div class="main">


    <div class="main-content project">
        <div class="row">
            <div class="col-12">
                <div class="box card-box">
                    <div class="icon-box bg-color-1">
                        <div class="icon bg-icon-1">
                            <i class="bx bxs-bell bx-tada bx-tada"></i>
                        </div>
                        <div class="content">
                            <h5 class="title-box">Notification</h5>
                            <p class="color-1 mb-0 pt-4">0 Unread notification</p>
                        </div>
                    </div>
             
                    <div class="icon-box bg-color-3">
                        <a class="create d-flex" href="#0">
                            <div class="icon bg-icon-3">
                                <i class="bx bx-calendar"></i>
                            </div>
                            <div class="content">
                                <h5 class="title-box">Calendar</h5>
                                <p class="color-3 mb-0 pt-4">0 Unread notification</p>
                            </div>
                        </a>
                    </div>
                    
                </div>
            </div>

        </div>
        <div class="mb-2">
           <h5  >Fashion House</h5><br>
        </div>
        <div class="row ">
            <div class="col-6 col-md-6 col-sm-12 mb-0">
                <div class="row">
                    <div class=" col-12 mb-4">
                        <div class="pt-0">
                            <div class="box">
                                <div class="box-body d-flex pb-0">
                                    <div class="me-auto">
                                        <h4 class="numb fs-30 font-wb">{{bespoke_orders_count}}</h4>
                                        <h5 class="card-title fs-18 font-w400">Total Bespoke Orders</h5>
                                        <p class="fs-14 mb-0 mt-11"><span class="text-primary">0</span> this week</p>
                                    </div>
                                    
                                    <!-- "View All" button aligned to the top right -->
                                    <div class="ms-auto">
                                        <a href="{% url 'myadmin:bespoke-orders-list' 'all' %}" class="btn btn-outline-primary btn-sm">View All</a>
                                    </div>
                                    
                                    <div hidden id="total-revenue-chart"></div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                
               
                   
                   
                  
                </div>
            </div>
            <div class="col-6 col-md-6 col-sm-12 mb-0" >
                <div class="row">
                    <div class="col-12 ">
                        <div class="box">
                            <div class="box-body d-flex pb-0">
                                <div class="me-auto">
                                    <h5 class="box-title mb-36">Orders Completed</h5>
                                    <div class="progress skill-progress mb-10" style="height:10px;">
                                        <div class="progress-bar bg-primary progress-animated" style="width: {{completed_bespoke_orders_percent}}%; height:10px;" role="progressbar">
                                            <span class="sr-only">{{completed_bespoke_orders_percent}}% Complete</span>
                                        </div>
                                    </div>
                                    <p hidden class="fs-16 mb-0 mt-2"><span class="text-primary">0 </span>left from target</p>
                                </div>
                                <h4 class="numb font-wb fs-30">{{completed_bespoke_orders_count}}</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-12" hidden>
                        <!-- CUSTOMERS CHART -->
                        <div class="box f-height">
                            <div class="box-header d-flex justify-content-between mb-wrap">
                                <h3 class="mt-9 ml-5">Order Statistics</h3>
                                <ul class="card-list mb-0">
                                    <li class="custom-label"><span></span>Completed</li>
                                    <li class="custom-label"><span></span>In Progress</li>
                                </ul>
                            </div>
                            <div class="box-body pt-20">
                                <div id="bespoke_order_chart"></div>
                            </div>
                        </div>
                        <!-- END CUSTOMERS CHART -->
                    </div>
                    
                </div>
            </div>
      
         
        </div>

        <div class="row mb-5">
            <div class="">
                <div class="box-header pt-0 pl-0 ms-0 mb-4 mt-4 border-bottom-0 responsive-header">
                    <h5 class="box-title fs-22">Unpaid Due Salaries</h5>
                    <div class="card-options">
                        <div class="btn-list d-flex">

                            <a href="{% url 'myadmin:salary-log-list' %}" class="btn btn-light me-0 d-flex align-items-center"
                              > See All <i
                                    class="eye"></i></a>
                           
                        </div>
                    </div>
                </div>

                <div class="box ">
                    <div class="box-body pb-0 table-responsive activity mt-0">
                        <table class="table table-vcenter text-nowrap table-bordered dataTable no-footer mw-100"
                            id="unpaid-salaries" role="grid">
                            <thead>
                                <tr class="top">
                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 100px;">Staff ID
                                    </th>
                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 150px;">Name</th>
                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 100px;">Department
                                    </th>
                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 100px;">Role</th>


                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 120px;">Salary Due
                                    </th>
                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 120px;">Date Due
                                    </th>
                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 120px;">Bank Name
                                    </th>
                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 120px;">Account
                                        Number</th>
                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 120px;">Account
                                        Name</th>

                                    <th class="border-bottom-0 sorting fs-14 font-w500" style="width: 120px;">Employment
                                        Status</th>
                                    <th class="border-bottom-0 sorting_disabled fs-14 font-w500" style="width: 150px;">
                                        Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for log in unpaid_salaries %}
                                <tr class="{% cycle 'odd' 'even' %}">
                                    <td><a href="{% url 'myadmin:staff-detail' log.staff.pk %}"
                                            class="d-flex"><span><b>#{{ log.staff.user.account_id }}</b></span></a></td>
                                    <td><a href="#"
                                            class="d-flex"><span>{{ log.staff.user.full_name|capitalize  }}</span></a>
                                    </td>
                                    <td>{{ log.staff.department_verbose|capitalize }}</td>
                                    <td>{{ log.staff.role_verbose|capitalize  }}</td>
                                    <td>₦{{ log.amount_due|intcomma }}</td>
                                    <td>{{ log.date_due|date:"Y-m-d"  }}</td>


                                    <td>{{log.staff.bank_name|default:"N/A"}}</td>
                                    <td>{{log.staff.bank_account_number|default:"N/A"}}</td>
                                    <td>{{log.staff.bank_account_name|default:"N/A"}}</td>
                                    <td>{{ log.staff.get_employment_status_display }}</td>
                                    <td>
                                        <button class="btn btn-success btn-sm mt-2 salary-paid-btn "
                                            id="mark-salary-paid{{ log.id }}" data-order-id="{{log.pk}}"
                                            data-target-url="{% url 'myadmin:mark-salary-paid' log.pk %}" data-new-status="approved">
                                            Mark As Paid
                                        </button>
                                    </td>

                                </tr>
                                {% empty %}
                                <tr class="mt-5 mb-5">
                                    <td colspan="9">No unpaid salaries found.</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>





        <div id="add_project" class="modal custom-modal fade" role="dialog">
            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Create Project</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="row">
                                <div class="col-sm-6 mb-0">
                                    <div class="form-group">
                                        <label>Project Name</label>
                                        <input class="form-control" value="" type="text">
                                    </div>
                                </div>
                                <div class="col-sm-6 mb-0">
                                    <div class="form-group">
                                        <label>Client</label>
                                        <select class="select">
                                            <option>Client 1</option>
                                            <option>Client 2</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 mb-0">
                                    <div class="form-group">
                                        <label>Start Date</label>
                                        <div class="cal-icon">
                                            <input class="form-control " type="date">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 mb-0">
                                    <div class="form-group">
                                        <label>End Date</label>
                                        <div class="cal-icon">
                                            <input class="form-control" type="date">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3 mb-0">
                                    <div class="form-group">
                                        <label>Rate</label>
                                        <input placeholder="₦50" class="form-control" value="" type="text">
                                    </div>
                                </div>
                                <div class="col-sm-3 mb-0">
                                    <div class="form-group">
                                        <label>&nbsp;</label>
                                        <select class="select">
                                            <option>Hourly</option>
                                            <option selected>Fixed</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-6 mb-0">
                                    <div class="form-group">
                                        <label>Priority</label>
                                        <select class="select">
                                            <option selected>High</option>
                                            <option>Medium</option>
                                            <option>Low</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea rows="4" class="form-control" placeholder="Enter your message here"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Upload Files</label>
                                <input class="form-control" type="file">
                            </div>
                            <div class="submit-section">
                                <button class="btn btn-primary submit-btn">Save</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal custom-modal fade" id="delete_project" role="dialog">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="form-header">
                            <h3>Delete Project</h3>
                            <p>Are you sure want to delete?</p>
                        </div>
                        <div class="modal-btn delete-action">
                            <div class="row">
                                <div class="col-6 mb-0">
                                    <a href="javascript:void(0);" class="btn btn-primary continue-btn">Delete</a>
                                </div>
                                <div class="col-6 mb-0">
                                    <a href="javascript:void(0);" data-dismiss="modal" class="btn btn-primary cancel-btn">Cancel</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal custom-modal fade" id="edit_project" role="dialog">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="form-header">
                            <h5 class="modal-title">Edit Project</h5>
                        </div>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="row">
                                <div class="col-sm-6 mb-0">
                                    <div class="form-group">
                                        <label>Project Name</label>
                                        <input class="form-control" value="Gold App" type="text">
                                    </div>
                                </div>
                                <div class="col-sm-6 mb-0">
                                    <div class="form-group">
                                        <label>Client</label>
                                        <select class="select">
                                            <option>Client 1</option>
                                            <option>Client 2</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="submit-section">
                                <button class="btn btn-primary submit-btn">Save</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<!-- END MAIN CONTENT -->

<div class="overlay"></div>


{% endblock %}

{% block js %}
<script>
    window.chartData = {
        series: [
            {% for series_item in bespoke_chart_series %}
                {
                    name: "{{ series_item.name }}",
                    data: [{{ series_item.data|join:', ' }}]
                },
            {% endfor %}
        ],
        categories: [
            {% for month in bespoke_chart_categories %}
                "{{ month }}",
            {% endfor %}
        ]
    };
</script>
<script src="{% static 'js/admin/charts.js' %}""></script>

{% endblock %}